<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jadwal Piket Rumah Tahfidz</title>
    <style>
        /* --- DESIGN TOKENS --- */
        :root {
            --primary: #2c3e50;
            --accent: #c0392b;
            --bg-page: #f8f9fa;
            --bg-card: #ffffff;
            --border: #e9ecef;
            
            /* Warna Badge */
            --badge-siang-bg: #fff3cd;
            --badge-siang-text: #856404;
            --badge-sore-bg: #d1ecf1;
            --badge-sore-text: #0c5460;
        }

        * { box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 12px;
            background-color: var(--bg-page);
            color: var(--primary);
            font-size: 13px;
            line-height: 1.4;
            -webkit-font-smoothing: antialiased;
        }

        /* --- CONTAINER --- */
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: var(--bg-card);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            overflow: hidden;
            border: 1px solid var(--border);
        }

        /* --- HEADER --- */
        .header {
            background-color: var(--accent);
            color: white;
            padding: 12px 16px;
            text-align: center;
            border-bottom: 3px solid #a93226;
        }

        .header h2 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .header small {
            display: block;
            margin-top: 2px;
            opacity: 0.8;
            font-size: 11px;
            font-weight: 400;
        }

        /* --- FILTER BAR (BARU) --- */
        .filter-bar {
            padding: 10px 16px;
            background-color: #fcfcfc;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-label {
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            color: #6c757d;
            white-space: nowrap;
        }

        .filter-select {
            flex: 1;
            padding: 6px 10px;
            font-size: 13px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: white;
            color: var(--primary);
            outline: none;
            -webkit-appearance: none; /* Hilangkan style default OS */
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236c757d%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 10px auto;
            cursor: pointer;
        }

        .filter-select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(192, 57, 43, 0.1);
        }

        /* --- TABEL --- */
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        th, td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            vertical-align: middle;
        }

        thead th {
            background-color: #fcfcfc;
            color: #6c757d;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            font-weight: 700;
            border-bottom: 2px solid var(--border);
        }

        tbody tr:last-child td { border-bottom: none; }
        tbody tr:hover { background-color: #fafafa; }

        /* Kolom Lebar */
        th:nth-child(1), td:nth-child(1) { width: 40px; text-align: center; color: #adb5bd; }
        th:nth-child(2), td:nth-child(2) { width: 75px; font-weight: 600; color: #495057; white-space: nowrap; }
        th:nth-child(3), td:nth-child(3) { width: auto; }

        /* --- KOMPONEN ISI --- */
        .picket-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .picket-item {
            display: flex;
            align-items: center;
            gap: 6px;
            flex: 1;
            min-width: 0;
        }

        .separator {
            color: #ced4da;
            font-size: 12px;
            margin: 0 2px;
        }

        /* --- WARNA NAMA --- */
        .name {
            font-weight: 700;
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .ustadz-haidir { color: #c0392b; }
        .ustadz-hussaini { color: #8e44ad; }
        .ustadz-jufri { color: #922b21; }
        .ustadz-tahmid { color: #d35400; }
        .ustadz-sofyan { color: #27ae60; }
        .ustadzah-astrid { color: #f39c12; }
        .ustadzah-ipah { color: #16a085; }
        .ustadzah-risda { color: #8e44ad; }
        .ustadz-syarif { color: #795548; }
        .ustadzah-sanah { color: #138d75; }
        .ustadz-fahrul { color: #ba4a00; }
        .ustadz-syamsi { color: #2980b9; }

        /* --- BADGE --- */
        .badge {
            display: inline-block;
            font-size: 9px;
            font-weight: 700;
            padding: 3px 6px;
            border-radius: 4px;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.4px;
            line-height: 1;
            border: 1px solid transparent;
            flex-shrink: 0;
        }

        .badge-siang {
            background-color: var(--badge-siang-bg);
            color: var(--badge-siang-text);
            border-color: #ffeeba;
        }

        .badge-sore {
            background-color: var(--badge-sore-bg);
            color: var(--badge-sore-text);
            border-color: #bee5eb;
        }

        .badge-special {
            background-color: #e2e3e5;
            color: #383d41;
            border-color: #d6d8db;
        }

        /* --- EMPTY STATE --- */
        .empty-state {
            text-align: center;
            padding: 20px;
            color: #999;
            font-style: italic;
            display: none;
        }

        /* --- MOBILE OPTIMIZATION --- */
        @media (max-width: 480px) {
            body { padding: 0; background-color: #fff; }
            .container { box-shadow: none; border: none; border-radius: 0; }
            .filter-bar { padding: 8px 12px; }
            
            .picket-wrapper {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
                width: 100%;
            }
            
            .picket-item {
                width: 100%;
                justify-content: space-between;
                border-bottom: 1px dashed #eee;
                padding-bottom: 4px;
            }
            
            .picket-item:last-child {
                border-bottom: none;
                padding-bottom: 0;
            }
            .separator { display: none; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>JADWAL PIKET</h2>
        <small>Rumah Tahfidz Saijaan</small>
    </div>

    <!-- Filter Dropdown Bar -->
    <div class="filter-bar">
        <label class="filter-label" for="petugasFilter">Filter:</label>
        <select id="petugasFilter" class="filter-select">
            <option value="all">Semua Petugas</option>
            <!-- Opsi akan diisi otomatis oleh JS -->
        </select>
    </div>
    
    <table id="jadwalTable">
        <thead>
            <tr>
                <th>No</th>
                <th>Tanggal</th>
                <th>Petugas & Kelas</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- Data Render -->
        </tbody>
    </table>
    
    <!-- Pesan jika data tidak ditemukan -->
    <div id="emptyState" class="empty-state">
        Tidak ada jadwal untuk petugas ini.
    </div>
</div>

<script>
    const dataJadwal = [
        { no: 1, tanggal: "23 Feb", items: [{ name: "Ust. Haidir", class: "ustadz-haidir", shift: "siang" }, { name: "Usth. Risda", class: "ustadzah-risda", shift: "sore" }] },
        { no: 2, tanggal: "24 Feb", items: [{ name: "Ust. Hussaini", class: "ustadz-hussaini", shift: "siang" }, { name: "Usth. Astrid", class: "ustadzah-astrid", shift: "siang" }] },
        { no: 3, tanggal: "25 Feb", items: [{ name: "Ust. Jufri", class: "ustadz-jufri", shift: "siang" }, { name: "Ust. Tahmid", class: "ustadz-tahmid", shift: "siang" }] },
        { no: 4, tanggal: "26 Feb", items: [{ name: "Ust. Sofyan", class: "ustadz-sofyan", shift: "siang" }, { name: "Ust. Sofyan", class: "ustadz-sofyan", shift: "sore" }] },
        { no: 5, tanggal: "27 Feb", items: [{ name: "Usth. Astrid", class: "ustadzah-astrid", shift: "siang" }, { name: "Ust. Sofyan", class: "ustadz-sofyan", shift: "siang" }] },
        { no: 6, tanggal: "28 Feb", items: [{ name: "Usth. Ipah", class: "ustadzah-ipah", shift: "siang" }, { name: "Ust. Syarif", class: "ustadz-syarif", shift: "siang" }] },
        { no: 7, tanggal: "01 Mar", items: [{ name: "Usth. Risda", class: "ustadzah-risda", shift: "siang" }, { name: "Ust. Haidir", class: "ustadz-haidir", shift: "sore" }] },
        { no: 8, tanggal: "02 Mar", items: [{ name: "Ust. Syarif", class: "ustadz-syarif", shift: "siang" }, { name: "Usth. Ipah", class: "ustadzah-ipah", shift: "sore" }] },
        { no: 9, tanggal: "03 Mar", items: [{ name: "Ust. Tahmid", class: "ustadz-tahmid", shift: "siang" }, { name: "Ust. Hussaini", class: "ustadz-hussaini", shift: "siang" }] },
        { no: 10, tanggal: "04 Mar", items: [{ name: "Usth. Sanah", class: "ustadzah-sanah", shift: "siang" }, { name: "Usth. Astrid", class: "ustadzah-astrid", shift: "sore" }] },
        { no: 11, tanggal: "05 Mar", items: [{ name: "Ust. Haidir", class: "ustadz-haidir", shift: "sore" }, { name: "Ust. Jufri", class: "ustadz-jufri", shift: "sore" }] },
        { no: 12, tanggal: "06 Mar", items: [{ name: "Ust. Hussaini", class: "ustadz-hussaini", shift: "sore" }, { name: "Usth. Risda", class: "ustadzah-risda", shift: "siang" }] },
        { no: 13, tanggal: "07 Mar", items: [{ name: "Ust. Jufri", class: "ustadz-jufri", shift: "sore" }, { name: "Usth. Sanah", class: "ustadzah-sanah", shift: "siang" }] },
        { no: 14, tanggal: "08 Mar", items: [{ name: "Ust. Sofyan", class: "ustadz-sofyan", shift: "sore" }, { name: "Ust. Hussaini", class: "ustadz-hussaini", shift: "sore" }] },
        { no: 15, tanggal: "09 Mar", items: [{ name: "Usth. Astrid", class: "ustadzah-astrid", shift: "sore" }, { name: "Ust. Haidir", class: "ustadz-haidir", shift: "siang" }] },
        { no: 16, tanggal: "10 Mar", items: [{ name: "Usth. Ipah", class: "ustadzah-ipah", shift: "sore" }, { name: "Usth. Ipah", class: "ustadzah-ipah", shift: "siang" }] },
        { no: 17, tanggal: "11 Mar", items: [{ name: "Usth. Risda", class: "ustadzah-risda", shift: "sore" }, { name: "Ust. Jufri", class: "ustadz-jufri", shift: "siang" }] },
        { no: 18, tanggal: "12 Mar", custom: true, html: '<span class="name" style="color:#495057; width:100%">KELAS TAHFIDZ</span> <span class="badge badge-special">FAHRUL & SYAMSI</span>' }
    ];

    // Fungsi inisialisasi filter (Mengisi dropdown)
    function initFilter() {
        const select = document.getElementById('petugasFilter');
        const uniqueNames = new Set();

        // Ambil semua nama unik dari data
        dataJadwal.forEach(row => {
            if (row.items) {
                row.items.forEach(item => {
                    uniqueNames.add(item.name);
                });
            }
        });

        // Urutkan nama agar rapi (A-Z)
        const sortedNames = Array.from(uniqueNames).sort();

        // Masukkan ke dropdown
        sortedNames.forEach(name => {
            const option = document.createElement('option');
            option.value = name;
            option.textContent = name;
            select.appendChild(option);
        });

        // Event Listener saat dropdown berubah
        select.addEventListener('change', () => {
            applyFilter(select.value);
        });
    }

    // Fungsi Terapkan Filter
    function applyFilter(selectedName) {
        // Filter data berdasarkan logika:
        // Jika 'all', tampilkan semua.
        // Jika nama spesifik, tampilkan baris jika NAMA ADA di salah satu item baris tersebut.
        const filteredData = dataJadwal.filter(row => {
            if (selectedName === 'all') return true;
            
            // Jika baris custom (Kelas Tahfidz), biasanya disembunyikan saat filter nama spesifik
            if (row.custom) return false;

            // Cek apakah nama petugas ada di list items baris ini
            return row.items.some(item => item.name === selectedName);
        });

        renderTable(filteredData);
    }

    // Fungsi Render Tabel (Menerima parameter data)
    function renderTable(data) {
        const tableBody = document.getElementById('tableBody');
        const emptyState = document.getElementById('emptyState');
        
        tableBody.innerHTML = '';

        if (data.length === 0) {
            emptyState.style.display = 'block';
            return;
        } else {
            emptyState.style.display = 'none';
        }

        data.forEach(item => {
            const row = document.createElement('tr');
            let cellContent = '';

            if (item.custom) {
                cellContent = `<div class="picket-wrapper" style="justify-content: space-between;">${item.html}</div>`;
            } else {
                const itemsHTML = item.items.map((subItem, index) => {
                    const badgeClass = subItem.shift === 'siang' ? 'badge-siang' : 'badge-sore';
                    const badgeText = subItem.shift === 'siang' ? 'QURAN SIANG' : 'QURAN SORE';
                    let separator = '';
                    if (index < item.items.length - 1) {
                        separator = '<span class="separator">&</span>';
                    }

                    return `
                        <div class="picket-item">
                            <span class="name ${subItem.class}">${subItem.name}</span>
                            <span class="badge ${badgeClass}">${badgeText}</span>
                            ${separator}
                        </div>
                    `;
                }).join('');
                
                cellContent = `<div class="picket-wrapper">${itemsHTML}</div>`;
            }

            row.innerHTML = `
                <td>${item.no}</td>
                <td>${item.tanggal}</td>
                <td>${cellContent}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Jalankan saat halaman siap
    document.addEventListener('DOMContentLoaded', () => {
        initFilter();     // Siapkan dropdown
        renderTable(dataJadwal); // Render semua data awal
    });

</script>

</body>
</html>