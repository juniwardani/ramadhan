<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jadwal Sholat Ramadan 1446 H - Rumah Tahfidz Saijaan</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri&display=swap">
    <link rel="stylesheet" href="styles.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<style>
	* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Amiri', serif;
    background-color: #f8f9fa;
    color: #2c3e50;
}

.container {
    max-width: 100%;
    margin: 0 auto;
    padding: 10px;
}

header {
    text-align: center;
    margin-bottom: 20px;
    padding: 10px;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

h1 {
    font-size: 1.5rem;
    margin-bottom: 10px;
    color: #1a237e;
}

h2 {
    font-size: 1.2rem;
    margin-bottom: 5px;
    color: #283593;
}

.table-container {
    width: 100%;
    overflow-x: auto;
    position: relative;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.sticky-header {
    display: flex;
    position: sticky;
    top: 0;
    z-index: 1000;
    white-space: nowrap;
}

.header-cell {
    padding: 12px 8px;
    flex: 1;
    min-width: 100px;
    text-align: center;
    font-weight: bold;
    background: #1a237e;
    color: white;
    border-bottom: 1px solid rgba(255,255,255,0.2);
}

/* Colored headers for prayer times */
.header-cell:nth-child(2) { background: #D32F2F; }
.header-cell:nth-child(3) { background: #F57C00; }
.header-cell:nth-child(4) { background: #388E3C; }
.header-cell:nth-child(5) { background: #1565C0; }
.header-cell:nth-child(6) { background: #6A1B9A; }
.header-cell:nth-child(7) { background: #2E7D32; }
.header-cell:nth-child(8) { background: #C2185B; }
.header-cell:nth-child(9) { background: #283593; }

.header-cell:first-child,
.table-cell:first-child {
    position: sticky;
    left: 0;
    background: inherit;
    z-index: 2;
    min-width: 120px;
}

.header-cell:first-child {
    z-index: 3;
    background: #1a237e;
    white-space: normal;
}

.table-body {
    display: flex;
    flex-direction: column;
}

.table-row {
    display: flex;
    border-bottom: 1px solid #e3e8f0;
}

/* Striped rows with prayer time colors */
/* Striped rows with prayer time colors */
.table-row:nth-child(even) {
    background-color: #f5f7ff;
}

/* Agar semua kolom dalam baris ikut berubah warna */
.table-row:nth-child(even) .table-cell {
    background-color: #f5f7ff;
}

/* Memastikan warna dasar baris ganjil tetap putih */
.table-row:nth-child(odd) .table-cell {
    background-color: #fff;
}

.table-cell {
    padding: 12px 8px;
    flex: 1;
    min-width: 100px;
    text-align: center;
    transition: background-color 0.2s ease;
    line-height: 0.4;
}

.site-header {
    background: #800000;
    color: white;
    padding: 15px 0;
    text-align: center;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.site-title {
    font-size: 2.5rem;
    margin: 0;
    font-weight: bold;
    color: white;
}

.site-subtitle {
    font-size: 1rem;
    margin: 5px 0;
    opacity: 0.9;
}

.site-footer {
    background: #800000;
    color: white;
    padding: 15px 0;
    margin-top: 20px;
    text-align: center;
}

.footer-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 20px;
}

.copyright {
    font-size: 0.9rem;
}

.download-container {
    display: flex;
    justify-content: center;
    margin: 20px 0;
}

.download-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: #800000;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Amiri', serif;
    font-size: 1rem;
    transition: background-color 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.download-btn:hover {
    background-color: #600000;
}

.download-btn:active {
    transform: translateY(1px);
}

.download-icon {
    fill: currentColor;
}

@media (max-width: 768px) {
    .container {
        padding: 5px;
    }
    
    h1 {
        font-size: 1.2rem;
    }
    
    h2 {
        font-size: 1rem;
    }
    
    .header-cell, .table-cell {
        padding: 8px 6px;
        min-width: 80px;
        font-size: 0.9rem;
    }

    .header-cell:first-child,
    .table-cell:first-child {
        min-width: 100px;
        font-size: 0.85rem;
    }
    
    .site-title {
        font-size: 2rem;
    }
    
    .site-subtitle {
        font-size: 0.9rem;
    }
    
    .download-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
    }
    
    .download-icon {
        width: 20px;
        height: 20px;
    }
}

.table-container::-webkit-scrollbar {
    height: 8px;
}

.table-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.table-container::-webkit-scrollbar-thumb {
    background: #3f51b5;
    border-radius: 4px;
}

.table-container::-webkit-scrollbar-thumb:hover {
    background: #1a237e;
}

@media print {
    .table-container {
        overflow: visible !important;
        box-shadow: none !important;
    }
    
    .sticky-header, .header-cell {
        position: static !important;
    }
    
    .table-cell:first-child {
        position: static !important;
    }
}
</style>

<body>
    <!-- Site Header -->
    <header class="site-header">
        <h1 class="site-title">Rumah Tahfidz Saijaan</h1>
    </header>

    <div class="container">
        <header>
            <h1>Jadwal Imsakiyah Ramadan 1446 H</h1>
            <p>Untuk Daerah Kotabaru dan Sekitarnya</p>
        </header>

        <div class="table-container">
            <div class="sticky-header">
                <div class="header-cell">Tanggal</div>
                <div class="header-cell">Imsak</div>
                <div class="header-cell">Subuh</div>
                <div class="header-cell">Terbit</div>
                <div class="header-cell">Duha</div>
                <div class="header-cell">Dzuhur</div>
                <div class="header-cell">Ashar</div>
                <div class="header-cell">Maghrib</div>
                <div class="header-cell">Isya</div>
            </div>
            
            <div class="table-body" id="tableBody"></div>
        </div>
        
        <div class="download-container">
            <button id="downloadBtn" class="download-btn">
                <svg class="download-icon" viewBox="0 0 24 24" width="24" height="24">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
                Download Jadwal (JPG)
            </button>
        </div>
    </div>

    <!-- Simplified Site Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="copyright">
                <p>&copy; 2024 Rumah Tahfidz Saijaan. Hak Cipta Dilindungi.</p>
            </div>
        </div>
    </footer>

    <script>
const jadwal = [
    ["1 Ramadan", "04:57", "05:07", "06:19", "06:46", "12:31", "15:38", "18:36", "19:44"],
    ["2 Ramadan", "04:57", "05:07", "06:19", "06:46", "12:31", "15:38", "18:35", "19:44"],
    ["3 Ramadan", "04:57", "05:07", "06:19", "06:46", "12:30", "15:37", "18:35", "19:44"],
    ["4 Ramadan", "04:57", "05:07", "06:19", "06:46", "12:30", "15:36", "18:35", "19:43"],
    ["5 Ramadan", "04:57", "05:07", "06:19", "06:46", "12:30", "15:35", "18:34", "19:43"],
    ["6 Ramadan", "04:57", "05:07", "06:19", "06:46", "12:30", "15:34", "18:34", "19:43"],
    ["7 Ramadan", "04:57", "05:07", "06:18", "06:46", "12:30", "15:33", "18:34", "19:42"],
    ["8 Ramadan", "04:57", "05:07", "06:18", "06:45", "12:29", "15:32", "18:33", "19:42"],
    ["9 Ramadan", "04:57", "05:07", "06:18", "06:45", "12:29", "15:31", "18:33", "19:41"],
    ["10 Ramadan", "04:57", "05:07", "06:18", "06:45", "12:29", "15:30", "18:33", "19:41"],
    ["11 Ramadan", "04:56", "05:06", "06:18", "06:45", "12:29", "15:29", "18:32", "19:41"],
    ["12 Ramadan", "04:56", "05:06", "06:18", "06:45", "12:28", "15:28", "18:32", "19:40"],
    ["13 Ramadan", "04:56", "05:06", "06:17", "06:44", "12:28", "15:28", "18:32", "19:40"],
    ["14 Ramadan", "04:56", "05:06", "06:17", "06:44", "12:28", "15:28", "18:31", "19:39"],
    ["15 Ramadan", "04:56", "05:06", "06:17", "06:44", "12:27", "15:29", "18:31", "19:39"],
    ["16 Ramadan", "04:56", "05:06", "06:17", "06:44", "12:27", "15:29", "18:30", "19:39"],
    ["17 Ramadan", "04:56", "05:06", "06:17", "06:44", "12:27", "15:30", "18:30", "19:38"],
    ["18 Ramadan", "04:55", "05:05", "06:16", "06:44", "12:27", "15:30", "18:30", "19:38"],
    ["19 Ramadan", "04:55", "05:05", "06:16", "06:43", "12:26", "15:30", "18:29", "19:37"],
    ["20 Ramadan", "04:55", "05:05", "06:16", "06:43", "12:26", "15:31", "18:29", "19:37"],
    ["21 Ramadan", "04:55", "05:05", "06:16", "06:43", "12:26", "15:31", "18:29", "19:37"],
    ["22 Ramadan", "04:55", "05:05", "06:16", "06:43", "12:26", "15:32", "18:29", "19:37"],
    ["23 Ramadan", "04:54", "05:04", "06:15", "06:42", "12:25", "15:32", "18:28", "19:36"],
    ["24 Ramadan", "04:54", "05:04", "06:15", "06:42", "12:25", "15:32", "18:27", "19:36"],
    ["25 Ramadan", "04:54", "05:04", "06:15", "06:42", "12:25", "15:32", "18:27", "19:35"],
    ["26 Ramadan", "04:54", "05:04", "06:15", "06:42", "12:24", "15:32", "18:27", "19:35"],
    ["27 Ramadan", "04:53", "05:03", "06:15", "06:42", "12:24", "15:33", "18:26", "19:34"],
    ["28 Ramadan", "04:53", "05:03", "06:14", "06:41", "12:24", "15:33", "18:26", "19:34"],
    ["29 Ramadan", "04:53", "05:03", "06:14", "06:41", "12:23", "15:33", "18:25", "19:34"],
    ["30 Ramadan", "04:53", "05:03", "06:14", "06:41", "12:23", "15:33", "18:25", "19:33"]
];

const tableBody = document.getElementById('tableBody');

jadwal.forEach(row => {
    const rowElement = document.createElement('div');
    rowElement.className = 'table-row';
    
    row.forEach(cell => {
        const cellElement = document.createElement('div');
        cellElement.className = 'table-cell';
        cellElement.textContent = cell;
        rowElement.appendChild(cellElement);
    });
    
    tableBody.appendChild(rowElement);
});

document.getElementById('downloadBtn').addEventListener('click', async () => {
    try {
        const btn = document.getElementById('downloadBtn');
        const originalText = btn.innerHTML;
        btn.innerHTML = 'Memproses...';
        btn.disabled = true;

        const tempContainer = document.createElement('div');
        tempContainer.style.width = '900px';
        tempContainer.style.position = 'absolute';
        tempContainer.style.left = '-9999px';
        tempContainer.style.background = '#ffffff';
        tempContainer.style.padding = '40px';
        document.body.appendChild(tempContainer);

        const title = document.createElement('div');
        title.style.textAlign = 'center';
        title.style.marginBottom = '20px';
        title.style.fontFamily = 'Amiri, serif';
        title.innerHTML = `
            <h1 style="color: #1a237e; font-size: 30px; margin-bottom: 5px;">Jadwal Imsakiyah Ramadan 1446 H<br>Rumah Tahfidz Saijaan</h1>
            <p style="color: #2c3e50;"><strong>Untuk Daerah Kotabaru dan Sekitarnya</strong></p>
        `;
        tempContainer.appendChild(title);

        const tableContainer = document.createElement('div');
        tableContainer.style.width = '820px';
        tableContainer.style.background = '#ffffff';
        tableContainer.style.fontFamily = 'Amiri, serif';
        tableContainer.style.fontSize = '14px';

        const header = document.createElement('div');
        header.style.display = 'flex';
        header.innerHTML = `
            <div style="flex: 1.6; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #1a237e;">Tanggal</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #D32F2F;">Imsak</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #F57C00;">Subuh</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #388E3C;">Terbit</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #1565C0;">Duha</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #6A1B9A;">Dzuhur</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #2E7D32;">Ashar</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #C2185B;">Maghrib</div>
            <div style="flex: 1; padding: 10px 8px; color: white; text-align: center; font-weight: bold; background: #283593;">Isya</div>
        `;
        tableContainer.appendChild(header);

        jadwal.forEach((row, index) => {
            const rowElement = document.createElement('div');
            rowElement.style.display = 'flex';
            rowElement.style.borderBottom = '1px solid #e3e8f0';
            rowElement.style.background = index % 2 === 0 ? '#fff' : '#f5f7ff';

            row.forEach((cell, cellIndex) => {
                const cellElement = document.createElement('div');
                cellElement.style.flex = cellIndex === 0 ? '1.5' : '1'; // Kolom pertama lebih lebar
                cellElement.style.padding = '5px 5px';
                cellElement.style.textAlign = 'center';
                cellElement.style.fontSize = '22px';
                cellElement.textContent = cell;
                rowElement.appendChild(cellElement);
            });

            tableContainer.appendChild(rowElement);
        });

        tempContainer.appendChild(tableContainer);

        const canvas = await html2canvas(tempContainer, {
            backgroundColor: '#ffffff',
            scale: 1.5,
            logging: false,
            useCORS: true,
            allowTaint: true
        });

        document.body.removeChild(tempContainer); // Hapus container setelah selesai

        const link = document.createElement('a');
        link.download = 'Jadwal-Imsak-Ramadan-1446H.jpg';
        link.href = canvas.toDataURL('image/jpeg', 0.92);
        link.click();

        btn.innerHTML = originalText;
        btn.disabled = false;

    } catch (error) {
        console.error('Error generating image:', error);
        alert('Terjadi kesalahan saat mengunduh jadwal. Silakan coba lagi.');

        const btn = document.getElementById('downloadBtn');
        btn.innerHTML = originalText;
        btn.disabled = false;
    }
});
</script>
</body>
</html>
